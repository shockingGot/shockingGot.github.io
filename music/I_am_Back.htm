<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>球场电单车</title>

    <style>
        body {
            height: 100vh;
            margin: 0px;
            background-color: black;
            overflow:hidden;
        }

        .box{
            display: flex;
            justify-content:center;
            align-items: center;
            height: 100vh;

        }
        
        .perspective {
            perspective: 500px; /* 调整透视效果的深度 */
            background-color1: #333333;
        }
        
        .trapezoid {
            width: 400px;            /* 矩形的宽度 */
            height: 400px;          /* 矩形的高度 */
            background-color1: #3498db; /* 矩形的颜色 */
            transform: rotateX(-10deg) rotateY(55deg) scaleY(0.9) translateZ(-10px); /* 透视效果 */
            position: relative;
            overflow:hidden;
          
        }
        
        #lyrics {
                    font-size: 1.2em;
                    line-height: 1.5em;
                    padding: 10px;
                    border: 0px solid #ccc;
                    background-color1: #333;
          	   color:#666;
                    text-shadow: 0 0 2px #222, 0 0 2px #222;
                }

	#lyrics p{
		opacity:0.6;
	}
                #lyrics .highlight {
                    color: #fafafa;
                    font-size: 1.4em;
		    opacity:0.8;
                }
                .highlight2{
                    color: #dadada;
                    font-size: 1.3em;
                }
        
        .circle-image {
            width: 300px;             /* 设置宽度 */
            height: 300px;            /* 设置高度 */
            border-radius: 50%;       /* 设置为50%以形成圆形 */
            object-fit: cover;        /* 确保图像的填充方式合适 */
        }

    </style>
</head>

<body>
  <div style="max-width:480px;min-width1:100vw;height:100vh;border:0px solid #222;position:relative;margin:auto auto;overflow:hidden;">
    <div style="position:absolute;width:100%;z-index:3;padding:16px;text-align:center;color:#efefef;font-size:1.2em;opacity:0.65;font-weight:bold;">- 球场电单车 -</div>
    <div class="box" style="position:absolute;z-index:2;width:100%;height:100%;border:0px solid red;background1:red;">
       <!-- 歌词显示 -->
       <div class="perspective">
           <div id="lyrics" class="trapezoid"></div>
       </div>
    </div>
  
 

    <div style="position:absolute;z-index:1;right:10px;top:80px;">
        <img src="球场电单车长版.png" class="circle-image">
    </div>

    <div style="position:absolute;z-index:20;width:100%;height:100%;display: flex;justify-content:center;align-items: center;border:0px solid red;opacity:0.45;font-weight:bold;color:white;font-size:60px;cursor:pointer;" onclick="this.style.display='none'">
	播放▶
    </div>

  </div>

   <div style="position:fixed;z-index:10;bottom:10px;text-align:center;width:100vw;color:white;">
        <!-- 用于选择本地文件 -->
        <label for="fileInput" class="custom-button">选择mp3文件</label>
        <input type="file" id="fileInput" accept="audio/mp3" style="display:none;">

        <label for="lrcInput" class="custom-button">选择lrc文件</label>
        <input type="file" id="lrcInput" accept=".lrc" style="display:none;">
	<br/>
        <!-- 音频播放控件 -->
        <audio id="audioPlayer" controls></audio>
   </div>

   

   <div style="opacity:0.25;top:0px;left:0px;position:absolute;z-index:0;width:100vw;height:100vh;background-image: url('球场电单车长版.png');filter: blur(6px);background-size: cover;">123</div>

    <script>
        // LRC歌词内容
                const lrcContent = `
        [00:16.00]
        [00:16.10]
        [00:16.20]
        [00:16.30]
        [00:16.40]
        [00:16.50]
        [00:22.39]有个咁嘅球员
[00:24.93]睇落身型好似幾圓
[00:28.29]廿年前 
[00:31.07]其實智勇双全(ah ha?)
[00:36.56]每次赛前点翻支烟(on fire)
[00:42.16]得分必然领先
[00:48.11]"game on"
[00:48.80]"Three Two One"
[00:49.85]"show time"
[00:50.72](COME ON!)
[00:51.79]紧迫贴防就送你 in your face
[00:56.52]如果唔识死拉开距离
[00:59.94]得分仲 easy case
[01:04.49]反正带波、走位、档猜、得分..
[01:07.48]食你真系随意唔系特登
[01:11.95](sorry sorry)
[01:13.55]球场上嘅电单车(咩啊？)
[01:16.90]话过你就过你(咪多爹!)
[01:21.80]球场上嘅电单车(咩啊？)
[01:25.62]唔知你服唔服气(I don't care!)
[01:31.46](woo lalala oh lala)
[01:34.92](woo lala aaaah... aaah yeah yeah)
[01:45.39]依家呢个奥巴
[01:46.68]已有大把身家
[01:48.78]不过射波fade away
[01:51.06]似乎有啲渣
[01:53.68]如今赛前点翻支烟(very nice)
[01:56.20]开始养生表演
[02:01.18]"game on"
[02:05.49]"Three Two One"
[02:06.46]"party time"
[02:07.70](COME ON!)
[02:09.24]想当年部电单车
[02:12.41]依家变成奥松螺丝...
[02:17.40]身形变左兼埋无左团火
[02:20.36]身手同气势当然会差啲啲
[02:26.07]球场上嘅电单车(咩啊？)
[02:29.91]话过气就过气(也咩爹)
[02:35.08]球场上嘅电单车(咩啊？)
[02:38.39]大家和和气气
[02:41.56](唔该借借)
[02:42.55](我会讲谢谢)
[02:44.79](woo lalala oh lala)
[02:48.29](woo lala aaaah... aaah yeah yeah)
[02:57.43]虽然已到中年
[02:59.16]但佢仍想锻炼
[03:01.23]操fit自己重返峰巅
[03:05.57]鬚根香烟系佢嘅制胜法典
[03:09.61]致敬高比拜仁
[03:11.76]训练在凌晨四点
[03:14.80](wo ooooh.... oooooh)
[03:25.90](M...V...P...I am back!)
[03:53.88]例牌赛前点翻支烟(on fire)
[03:57.09]得分再次领先
[04:02.26]"game on"
[04:04.28]"Three Two One"
[04:05.42]"show time"
[04:07.44](COME ON!)
[04:09.45]球场上嘅电单车(咩啊？)
[04:12.86]话过气就过气(咪多爹!)
[04:18.10]球场上嘅电单车(咩啊？)
[04:21.25]无得你唔服气(I am back!)
[04:26.47]球场上嘅电单车(咩啊？)
[04:29.88]你威啦你至叻(唔再fat)
[04:35.01]球场上嘅电单车(咩啊？)
[04:38.57]one on one咪讲野(next next)
[04:43.36]球场上嘅电单车(咩啊？)
[04:47.59]话过你就过你(咪多爹!)
[04:52.30]球场上嘅电单车(咩啊？)
[04:55.71]无得你唔服气(I am back!)
[05:00.88]球场上嘅电单车(咩啊？)
[05:03.92]你威啦你至叻(唔再fat)
[05:09.10]球场上嘅电单车(咩啊？)
[05:12.69]one on one咪讲野(next next)
[05:17.60](woo lalala oh lala)
[05:20.01]"Who's next? ...仲有边个？"
[05:32.23]I... Am... Back
                `;
        
                // 解析LRC字幕并返回时间和歌词的数组
                function parseLRC(lrc) {
                    const lines = lrc.split('\n');
                    const lyrics = [];
        
                    lines.forEach(line => {
                        const match = line.match(/\[(\d+):(\d+)\.(\d+)\](.*)/);
                        if (match) {
                            const minutes = parseInt(match[1]);
                            const seconds = parseInt(match[2]);
                            const milliseconds = parseInt(match[3]);
                            const time = minutes * 60 + seconds + milliseconds / 1000;
                            const text = match[4].trim();
                            lyrics.push({ time, text });
                        }
                    });
                    return lyrics;
                }
        
                // 将解析后的歌词显示到页面上
                /*const lyricsArray = parseLRC(lrcContent);
                const lyricsDiv = document.getElementById('lyrics');
                
                lyricsArray.forEach(lyric => {
                    const p = document.createElement('p');
                    p.textContent = lyric.text;
	　 if(lyric.text == ''){
	    	p.innerHTML = '&nbsp;'
	    }
                    p.dataset.time = lyric.time;
                    lyricsDiv.appendChild(p);
                });*/

	var lyricsArray
	var lyricsDiv = document.getElementById('lyrics');

	function loadLRC(s){
		lyricsArray = parseLRC(s);
                	//var lyricsDiv = document.getElementById('lyrics');
                
                	lyricsArray.forEach(lyric => {
                   	 	var p = document.createElement('p');
                    		p.textContent = lyric.text;
	　 		if(lyric.text == ''){
	    			p.innerHTML = '&nbsp;'
	    		}
                    		p.dataset.time = lyric.time;
                    		lyricsDiv.appendChild(p);
               	 	});
	}
	loadLRC(lrcContent)

        
                // 当音频播放时，同步歌词显示
                const audioPlayer = document.getElementById('audioPlayer');
                audioPlayer.addEventListener('timeupdate', () => {
                    const currentTime = audioPlayer.currentTime;
        
                    lyricsArray.forEach((lyric, index) => {
                        const nextLyric = lyricsArray[index + 1];
                        const lyricElement = lyricsDiv.querySelector(`p[data-time='${lyric.time}']`);
        
                        // 高亮当前时间的歌词
                        if (currentTime >= lyric.time && (!nextLyric || currentTime < nextLyric.time)) {
                            // 移除之前的高亮
                            const highlighted = lyricsDiv.querySelector('.highlight');
                            if (highlighted) highlighted.classList.remove('highlight');
                            
                            // 高亮当前歌词
                            lyricElement.classList.add('highlight');
        

                            // 自动滚动歌词区域
                            lyricsDiv.scrollTop = lyricElement.offsetTop - lyricsDiv.offsetTop - lyricsDiv.clientHeight / 2;
                        }
                    });
                });
        
                // 选择本地MP3文件并播放
                document.getElementById('fileInput').addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const fileURL = URL.createObjectURL(file);
                        audioPlayer.src = fileURL;
                        audioPlayer.play();
                    }
                });

		audioPlayer.src = '球场电单车长版.mp3'

	var played = false
	document.body.addEventListener('click', function() {
	    if(played){return}
   
            audioPlayer.play().catch(error => {
                console.error("播放失败:", error);
            });
	    played = true
        });

    </script>

 <script>

        const lrcPadding = `
        [00:00.01]
        [00:00.10]
        [00:00.20]
        [00:00.30]
        [00:00.40]
        [00:00.50]
	`


        document.getElementById('lrcInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            
            if (file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const content = e.target.result;
                    //document.getElementById('fileContent').textContent = content;
	   loadLRC(lrcPadding + content)
                };
                
                reader.onerror = function(e) {
                    console.error("读取文件时发生错误:", e);
                };
                
                reader.readAsText(file, 'UTF-8');
            }
        });
    </script>
</body>

</html>
